(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["AdmConfig"],{9415:function(t,e,l){"use strict";l.r(e);var a=function(){var t=this,e=t._self._c;return e("v-container",{attrs:{fluid:""}},[e("v-toolbar",[e("v-toolbar-title",[t._v("설정관리")]),e("v-spacer"),e("tooltip-btn",{attrs:{fab:"",small:"",label:"설정추가"},on:{click:t.addConfig}},[e("v-icon",[t._v("mdi-plus")])],1)],1),e("v-row",[e("v-col",[e("v-tabs",{attrs:{"background-color":"primary",dark:""},model:{value:t.group,callback:function(e){t.group=e},expression:"group"}},t._l(t.groupItems,(function(l){return e("v-tab",{key:l},[t._v(" "+t._s(l)+" ")])})),1)],1)],1),e("draggable",{staticClass:"config-list-group",attrs:{tag:"ul",list:t.curItems,handle:".handle"},on:{end:t.sortEnd}},t._l(t.curItems,(function(t){return e("config-item",{key:t.cf_key,staticClass:"list-group-item",attrs:{item:t}})})),1),e("ez-dialog",{ref:"dialog",attrs:{label:"설정 추가","max-width":"500",dark:"",color:"primary",persistent:""}},[e("config-form",{attrs:{keyCheck:t.keyCheck},on:{save:t.save}})],1)],1)},o=[],r=(l("14d9"),l("2f62")),n=function(){var t=this,e=t._self._c;return e("v-dialog",t._b({model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},"v-dialog",t.$attrs,!1),[e("v-card",[e("v-toolbar",[e("v-toolbar-title",[t._v(t._s(t.label))]),e("v-spacer"),e("v-btn",{attrs:{icon:""},on:{click:t.close}},[e("v-icon",[t._v("mdi-close")])],1)],1),e("v-card-text",[t._t("default")],2)],1)],1)},s=[],i={name:"ezDialog",props:{label:{type:String,required:!0}},data(){return{dialog:!1}},methods:{close(){this.dialog=!1},open(){this.dialog=!0}}},c=i,u=l("2877"),f=Object(u["a"])(c,n,s,!1,null,null,null),p=f.exports,m=function(){var t=this,e=t._self._c;return e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:l,attrs:a}){return[e("v-btn",t._g(t._b({on:{click:function(e){return t.$emit("click")}}},"v-btn",{...a,...t.$attrs},!1),l),[t._t("default")],2)]}}],null,!0)},[e("span",[t._v(t._s(t.label))])])},v=[],d={name:"TooltipBtn",props:{label:{type:String,required:!0}}},_=d,b=Object(u["a"])(_,m,v,!1,null,null,null),g=b.exports,h=function(){var t=this,e=t._self._c;return e("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e("v-combobox",{attrs:{items:t.groupItems,label:"그룹",rules:[t.rules.require({label:"그룹"})]},model:{value:t.form.cf_group,callback:function(e){t.$set(t.form,"cf_group",e)},expression:"form.cf_group"}}),e("div",{staticClass:"d-flex"},[e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:l,attrs:a}){return[e("span",t._g(t._b({staticClass:"mr-2"},"span",a,!1),l),[e("v-checkbox",{attrs:{"true-value":"1","false-value":"0"},model:{value:t.form.cf_client,callback:function(e){t.$set(t.form,"cf_client",e)},expression:"form.cf_client"}})],1)]}}])},[e("span",[t._v("클라이언트")])]),e("input-duplicate-check",{ref:"cfKey",attrs:{label:"키",cbCheck:t.keyCheck,rules:[t.rules.require({label:"키"}),t.rules.alphaNum()]},model:{value:t.form.cf_key,callback:function(e){t.$set(t.form,"cf_key",e)},expression:"form.cf_key"}})],1),e("v-text-field",{attrs:{label:"이름",rules:t.rules.name()},model:{value:t.form.cf_name,callback:function(e){t.$set(t.form,"cf_name",e)},expression:"form.cf_name"}}),e("v-select",{attrs:{label:"값 타입",items:t.typeItems},model:{value:t.form.cf_type,callback:function(e){t.$set(t.form,"cf_type",e)},expression:"form.cf_type"}}),e("type-value",{attrs:{fieldType:t.form.cf_type},model:{value:t.form.cf_val,callback:function(e){t.$set(t.form,"cf_val",e)},expression:"form.cf_val"}}),e("v-slider",{attrs:{label:`접근레벨 (${t.form.cf_level})`,min:t.LV.ADMIN,max:t.LV.SUPER,"thumb-color":"primary","thumb-label":""},model:{value:t.form.cf_level,callback:function(e){t.$set(t.form,"cf_level",e)},expression:"form.cf_level"}}),e("v-textarea",{attrs:{label:"설명"},model:{value:t.form.cf_comment,callback:function(e){t.$set(t.form,"cf_comment",e)},expression:"form.cf_comment"}}),e("v-btn",{attrs:{type:"submit",block:""}},[t._v("저장")])],1)},y=[],k=l("248f"),x=l.n(k),I=l("50d8"),C=l("bb5e"),$=function(){var t=this,e=t._self._c;return"String"==t.fieldType?e("div",[e("v-text-field",{attrs:{label:"Value",value:t.value},on:{input:t.onInput}})],1):"Number"==t.fieldType?e("div",[e("v-text-field",{attrs:{label:"Value",type:"number",value:t.value},on:{input:t.onInput}})],1):"Json"==t.fieldType?e("div",[e("v-textarea",{attrs:{label:"Value",value:t.value},on:{input:t.onInput}})],1):"Secret"==t.fieldType?e("div",[e("input-password",{attrs:{label:"Sercet Value",value:t.value},on:{input:t.onInput}})],1):e("div",[e("div",[t._v("선택한 타입 입력필드가 없습니다.")])])},S=[],w=l("445e"),T={components:{InputPassword:w["a"]},name:"TypeValue",model:{prop:"value",event:"input"},props:{value:{type:String},fieldType:{type:String,default:"String"}},methods:{onInput(t){this.$emit("input",t)}}},V=T,D=Object(u["a"])(V,$,S,!1,null,null,null),j=D.exports,O={components:{InputDuplicateCheck:I["a"],TypeValue:j},name:"ConfigForm",props:{keyCheck:{type:Function,default:null}},data(){return{valid:!0,form:{cf_key:"",cf_val:"",cf_name:"",cf_group:"",cf_level:"",cf_type:"String",cf_comment:"",cf_client:0},groupItems:[],typeItems:["String","Number","Json","Secret"]}},computed:{rules:()=>x.a,LV:()=>C["LV"]},methods:{async save(){this.$refs.form.validate(),await this.$nextTick(),this.valid&&this.$refs.cfKey.validate()&&(this.form.cf_sort=0,this.$emit("save",this.form))}}},E=O,N=Object(u["a"])(E,h,y,!1,null,null,null),q=N.exports,z=l("b76a"),L=l.n(z),J=function(){var t=this,e=t._self._c;return e("li",[e("v-icon",{staticClass:"handle"},[t._v("mdi-drag")]),e("table",[e("tr",[e("td",[e("b",[t._v(t._s(t.item.cf_name))])]),e("td",[e("pre",{staticClass:"comment",domProps:{innerHTML:t._s(t.item.cf_comment)}})]),e("td",[e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:l,attrs:a}){return[e("v-avatar",t._g(t._b({attrs:{color:"primary",dark:"",size:"32"}},"v-avatar",a,!1),l),[e("span",{staticClass:"white--text"},[t._v(t._s(t.item.cf_level))])])]}}])},[e("span",[t._v("접근레벨")])])],1),e("td",[e("v-btn",{attrs:{icon:"",color:"primary"}},[e("v-icon",[t._v("mdi-pencil")])],1)],1)]),e("tr",[e("td",[e("b",[t._v(t._s(t.item.cf_key))])]),e("td",[t._v(" "+t._s(t.item.cf_val)+" ")]),e("td",[e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:l,attrs:a}){return[e("div",t._g(t._b({staticClass:"client"},"div",a,!1),l),[e("v-checkbox",{attrs:{readonly:"","hide-details":"",dense:""},model:{value:t.item.cf_client,callback:function(e){t.$set(t.item,"cf_client",e)},expression:"item.cf_client"}})],1)]}}])},[e("span",[t._v("클라이언트 접근")])])],1),e("td",[e("v-btn",{attrs:{icon:"",color:"error"}},[e("v-icon",[t._v("mdi-delete")])],1)],1)])])],1)},A=[],F={name:"ConfigItem",props:{item:{type:Object,required:!0}}},P=F,B=Object(u["a"])(P,J,A,!1,null,null,null),K=B.exports,M={components:{TooltipBtn:g,EzDialog:p,ConfigForm:q,draggable:L.a,ConfigItem:K},name:"AdmConfig",data(){return{items:[],group:-1,curItems:[],item:null}},computed:{groupItems(){const t=new Set;return this.items.forEach(e=>{t.add(e.cf_group)}),[...t]},groupName(){return this.groupItems[this.group]||""}},watch:{group(){this.curItems=this.items.filter(t=>t.cf_group==this.groupName),console.log(this.curItems)}},mounted(){this.fetchData()},methods:{...Object(r["b"])(["configDuplicate","configSave"]),addConfig(){this.$refs.dialog.open()},async save(t){this.configSave(t);this.$refs.dialog.close()},async keyCheck(t){const e={field:"cf_key",value:t};return await this.configDuplicate(e)},async fetchData(){this.items=await this.$axios.get("/api/config?all=true"),console.log(this.groupItems)},sortEnd(){let t=0;const e=[];this.curItems.forEach(l=>{l.cf_sort=t++,e.push({cf_key:l.cf_key,cf_sort:l.cf_sort})}),this.$axios.put("/api/config",e)}}},H=M,R=Object(u["a"])(H,a,o,!1,null,null,null);e["default"]=R.exports}}]);
//# sourceMappingURL=AdmConfig.5491917f.js.map