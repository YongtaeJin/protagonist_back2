(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["SysUsers"],{"37df":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e._self._c;return t("v-container",{attrs:{fluid:""}},[t("v-toolbar",[t("v-toolbar-title",[e._v("사용자 관리")]),t("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),t("v-spacer"),t("v-btn",{staticClass:"mr-2",attrs:{color:"primary",dark:""},on:{click:function(t){return e.openDialog()}}},[e._v("사용자 추가")])],1),t("v-card",[t("v-card-title",[t("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",sm:"2"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),t("v-data-table",{attrs:{headers:e.headers,items:e.users,search:e.search,loading:e.loading},on:{"dblclick:row":e.showRowInfo},scopedSlots:e._u([{key:"item",fn:function({item:s}){return[t("tr",{on:{dblclick:function(t){return e.handleClick(s)}}},[t("td",{attrs:{width:"160"}},[t("v-select",{attrs:{readonly:!0,items:e.compnayLists,"item-text":"n_com","item-value":"i_com"},model:{value:s.i_com,callback:function(t){e.$set(s,"i_com",t)},expression:"item.i_com"}})],1),t("td",[e._v(" "+e._s(s.i_id)+" ")]),t("td",[e._v(" "+e._s(s.n_name)+" ")]),t("td",[e._v(" "+e._s(s.i_password)+" ")]),t("td",[e._v(" "+e._s(s.t_memo))])])]}}])})],1),t("ez-dialog",{ref:"dialog",attrs:{label:"사용자 추가/수정",width:"400",color:"primary",persistent:""}},[t("sys-users-form",{attrs:{user:e.user,companys:e.compnayLists},on:{onSave:e.save}})],1)],1)},a=[],o=s("2f62"),n=s("a2e4"),r=function(){var e=this,t=e._self._c;return t("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.save.apply(null,arguments)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t("v-select",{attrs:{"prepend-icon":"mdi-office-building-outline",items:e.companys,hint:`${e.form.i_com.n_com||""}, ${e.form.i_com.i_com||""}`,"item-text":"n_com","item-value":"i_com",label:"사업장","persistent-hint":"","return-object":""},model:{value:e.form.i_com,callback:function(t){e.$set(e.form,"i_com",t)},expression:"form.i_com"}}),t("input-duplicate-check-2",{ref:"id",attrs:{label:"아이디","prepend-icon":"mdi-account",counter:"30",rules:e.rules.id(),cbCheck:e.cbCheckId},model:{value:e.form.i_id,callback:function(t){e.$set(e.form,"i_id",t)},expression:"form.i_id"}}),t("v-text-field",{attrs:{label:"이름","prepend-icon":"mdi-card-account-details-outline",rules:e.rules.name()},model:{value:e.form.n_name,callback:function(t){e.$set(e.form,"n_name",t)},expression:"form.n_name"}}),t("input-password",{attrs:{label:"비밀번호","prepend-icon":"mdi-lock",rules:e.rules.password()},model:{value:e.form.i_password,callback:function(t){e.$set(e.form,"i_password",t)},expression:"form.i_password"}}),t("v-text-field",{attrs:{label:"비고","prepend-icon":"mdi-note"},model:{value:e.form.t_memo,callback:function(t){e.$set(e.form,"t_memo",t)},expression:"form.t_memo"}}),t("v-btn",{attrs:{type:"submit",block:"",color:"primary",loading:e.isLoading}},[e._v("추 가")])],1)},l=[],c=s("64f2"),u=s("248f"),d=s.n(u),m=s("50d8"),h=function(){var e=this,t=e._self._c;return t("v-text-field",e._b({ref:"field",attrs:{value:e.value,maxlength:e.$attrs.counter,"error-messages":e.errMsg,"success-messages":e.successMsg},on:{input:e.onInput},scopedSlots:e._u([e.isCheck?null:{key:"append",fn:function(){return[t("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:i}){return[t("v-btn",e._g(e._b({attrs:{icon:"",small:"",tabindex:"-1",loading:e.loading},on:{click:e.check}},"v-btn",i,!1),s),[t("v-icon",[e._v("mdi-check")])],1)]}}],null,!1,1344435932)},[e._v(" "+e._s(e.$attrs.label)+" 중복검사 ")])]},proxy:!0}],null,!0)},"v-text-field",e.$attrs,!1))},p=[],f={name:"InputDuplicateCheck2",model:{prop:"value",event:"input"},props:{value:String,cbCheck:{type:Function,default:null},origin:{type:String,default:""}},watch:{origin(){this.isCheck=!!this.origin||!this.cbCheck}},data(){return{isCheck:!!this.origin||!this.cbCheck,loading:!1,errMsg:"",successMsg:""}},computed:{isSend(){return!!this.cbCheck&&0===this.$refs.field.errorBucket.length}},mounted(){},methods:{onInput(e){this.isCheck=this.origin?this.origin===e:!this.cbCheck,this.errMsg="",this.successMsg="",this.$emit("input",e)},async check(){if(!this.isSend)return;this.loading=!0,this.errMsg="",this.successMsg="";const e=await this.cbCheck(this.value);this.value?0==e.cnt?(this.successMsg=`사용 가능한 ${this.$attrs.label} 입니다.`,this.isCheck=!0):(this.errMsg=`중복된 ${this.$attrs.label} 입니다.`,this.isCheck=!1):this.successMsg="",this.loading=!1},validate(){return this.isCheck||(this.errMsg=this.$attrs.label+" 중복검사를 해주세요.",this.$refs.field.focus()),this.isCheck}}},v=f,_=s("2877"),b=Object(_["a"])(v,h,p,!1,null,null,null),g=b.exports,k=s("445e"),y={components:{InputDuplicateCheck:m["a"],InputDuplicateCheck2:g,InputPassword:k["a"]},name:"SysUsersForm",props:{user:{type:Object,default:null},companys:{type:Object,default:null},cbCheckId:{type:Function,default:null},isLoading:Boolean},data(){return{valid:!0,form:{i_com:"",i_id:"",i_password:"",n_name:"",t_memo:""}}},mounted(){},watch:{user(){this.init()}},computed:{rules:()=>d.a},created(){this.init()},destroyed(){this.form=null},methods:{init(){this.user?this.form=Object(c["deepCopy"])(this.user):this.form={i_com:"",i_id:"",i_password:"",n_name:"",t_memo:""},this.$refs.form&&this.$refs.form.resetValidation()},async save(){if(this.$refs.form.validate(),await this.$nextTick(),!this.valid)return;if(!this.$refs.id.validate())return;const e=new FormData,t=Object.keys(this.form);for(const s of t)e.append(s,this.form[s]);this.$emit("onSave",e)}}},x=y,w=Object(_["a"])(x,r,l,!1,null,null,null),$=w.exports,C={components:{EzDialog:n["a"],SysUsersForm:$},name:"SysUsers",data(){return{search:"",loading:!1,compnayLists:[],headers:[{text:"사업장코드",align:"start",filterable:!1,value:"i_com",width:"100px",fixed:!0},{text:"ID",value:"i_id"},{text:"성명",value:"n_name"},{text:"비밀번호",value:"i_password"},{text:"메모",value:"t_memo"}],users:[],company:-1,curUsers:[],user:null}},computed:{companyUsers(){},companyName(){}},watch:{company(){}},mounted(){this.fetchData()},methods:{...Object(o["b"])("company",["createUser"]),async fetchData(){this.compnayLists=await this.$axios.get("/api/company/companylist"),this.users=await this.$axios.get("/api/company/companyusers")},openDialog(e){this.user=null,this.$refs.dialog.open()},showRowInfo(e,{item:t}){this.user=t,this.$refs.dialog.open()},async save(e){this.isLoading=!0;await this.createUser(e);this.isLoading=!1}}},S=C,D=Object(_["a"])(S,i,a,!1,null,null,null);t["default"]=D.exports},a2e4:function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("v-dialog",e._b({model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},"v-dialog",e.$attrs,!1),[t("v-card",[t("v-toolbar",[t("v-toolbar-title",[e._v(e._s(e.label))]),t("v-spacer"),t("v-btn",{attrs:{icon:""},on:{click:e.close}},[t("v-icon",[e._v("mdi-close")])],1)],1),t("v-card-text",[e._t("default")],2)],1)],1)},a=[],o={name:"ezDialog",props:{label:{type:String,required:!0}},data(){return{dialog:!1}},methods:{close(){this.dialog=!1,this.$emit("onClose")},open(){this.$emit("onOpen"),this.dialog=!0}}},n=o,r=s("2877"),l=Object(r["a"])(n,i,a,!1,null,null,null);t["a"]=l.exports}}]);
//# sourceMappingURL=SysUsers.709cbba6.js.map